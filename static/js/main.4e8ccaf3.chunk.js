(this.webpackJsonpconvolver=this.webpackJsonpconvolver||[]).push([[0],[,,,,,function(e,t,a){e.exports=a(14)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(3),c=a.n(l),i=(a(10),a(1)),u=(a(11),a(12),function(e,t,a){return 4*(e+t*a)}),o=Math.floor,s=function(e,t,a,n,r){for(var l=0,c=0,i=0,s=o(t.dim/2),m=-s;m<=s;m++)for(var d=-s;d<=s;d++){var f=o(u(m+s,d+s,t.dim)/4),v=t.values[f]/a,g=u(n+m,r+d,500);l+=e.data[g]*v,i+=e.data[g+1]*v,c+=e.data[g+2]*v}return[l,i,c]},m=function(e){var t=Object(n.useRef)(),a=Object(n.useRef)(),l=Object(n.useRef)(),c=Object(n.useRef)(),o=Object(n.useState)(),m=Object(i.a)(o,2),d=m[0],f=m[1];Object(n.useEffect)((function(){if(d&&e.filter){var n=t.current.getContext("2d"),r=a.current.getContext("2d");n.drawImage(d,0,0,500,500);var l=n.getImageData(0,0,500,500);n.putImageData(l,0,0);for(var c=new ImageData(500,500),o=1;o<499;o++)for(var m=1;m<499;m++){var f=s(l,e.filter,e.scale,o,m),v=Object(i.a)(f,3),g=v[0],b=v[1],p=v[2],E=u(o,m,500);c.data[E]=g,c.data[E+1]=b,c.data[E+2]=p,c.data[E+3]=255}r.putImageData(c,0,0)}}),[e.filter,e.scale,d]);return r.a.createElement("div",{className:"image-display"},r.a.createElement("h2",null,"Original"),r.a.createElement("h2",null,"Convolved"),r.a.createElement("canvas",{ref:t,height:"500",width:"500",id:"display"}),r.a.createElement("canvas",{ref:a,height:"500",width:"500",id:"convolved-display"}),r.a.createElement("input",{ref:l,type:"file",id:"img",name:"img",onChange:function(e){if(e.target.files&&1===e.target.files.length){var t=e.target.files[0],a=new FileReader;a.onload=function(){var e=new Image;e.src=a.result,f(e)},a.readAsDataURL(t)}},accept:"image/png, image/jpeg"}),r.a.createElement("button",{className:"image-button",onClick:function(){l.current.click()}},"Choose Image"),r.a.createElement("a",{ref:c,onClick:function(e){var t=a.current.toDataURL("image/png");c.current.href=t},id:"download",className:"image-button",download:"convolved.png",href:"f"},"Download Convolved Image"))},d=a(4),f=(a(13),function(e){var t=e.dim,a=Object(n.useState)({values:Array(t*t).fill(1),dim:t}),l=Object(i.a)(a,2),c=l[0],u=l[1],o=Object(n.useState)(1),s=Object(i.a)(o,2),m=s[0],f=s[1];Object(n.useEffect)((function(){e.onInput(c,m)}),[c.dim]),Object(n.useEffect)((function(){u(e.filter),f(e.scale)}),[e.filter,e.scale]),Object(n.useEffect)((function(){var t=e.dim;u({values:Array(t*t).fill(1),dim:t})}),[e.dim]);return r.a.createElement("div",{className:"convolution"},r.a.createElement("h2",null,"Filter"),r.a.createElement("div",{className:"convolution-container",style:{gridTemplateColumns:"repeat(".concat(c.dim,", 1fr)"),width:50*c.dim,height:50*c.dim}},c.values.map((function(t,a){return r.a.createElement("input",{className:"filter-number",value:t,key:a,onChange:function(t){return function(t,a){var n=Object(d.a)({},c);n.values[a]=Number(t.target.value),u(n),e.onInput(n,m)}(t,a)},type:"number"})}))),r.a.createElement("div",{className:"filter-scale"},r.a.createElement("label",{htmlFor:"scale"},"Scale"),r.a.createElement("input",{name:"scale",value:m,onChange:function(t){f(Number(t.target.value)),e.onInput(c,Number(t.target.value))},type:"number"})))});var v=function(){var e=Object(n.useState)(3),t=Object(i.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(),u=Object(i.a)(c,2),o=u[0],s=u[1],d=Object(n.useState)(),v=Object(i.a)(d,2),g=v[0],b=v[1],p=Object(n.useRef)(),E=Object(n.useCallback)((function(e,t){s(e),b(t)}),[]);return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"dimension"},r.a.createElement("h1",null,"Image Convolver")),r.a.createElement(f,{dim:a,filter:o,scale:g,onInput:E}),r.a.createElement(m,{filter:o,scale:g}),r.a.createElement("div",{className:""},r.a.createElement("label",{htmlFor:"dimension"},"Filter Size"),r.a.createElement("input",{min:"3",max:"7",onChange:function(e){var t=Number(e.target.value);l(t%2===0?t+Math.sign(t-a):t)},value:a,type:"number",id:"dimension"})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"presets"},"Filter Presets"),r.a.createElement("select",{ref:p,onChange:function(){var e;switch(p.current.value){case"3x3 horz edge":s(e={values:[-5,-5,-5,5,5,5,0,0,0],dim:3}),l(3),b(1);break;case"3x3 vert edge":s(e={values:[-5,5,0,-5,5,0,-5,5,0],dim:3}),l(3),b(1);break;case"3x3 gen edge":s(e={values:[-2,-2,-2,-2,16,-2,-2,-2,-2],dim:3}),l(3),b(1);break;case"5x5 blur":e={values:Array(25).fill(1),dim:5},s(e),l(5),b(25);break;case"5x5 gauss blur":s(e={values:[1,4,6,4,1,4,16,24,16,4,6,24,36,24,6,4,16,24,16,4,1,4,6,4,1],dim:5}),l(5),b(256)}},id:"presets"},r.a.createElement("option",{value:"3x3 horz edge"},"3x3 Horizontal Edge Detection"),r.a.createElement("option",{value:"3x3 vert edge"},"3x3 Vertical Edge Detection"),r.a.createElement("option",{value:"3x3 gen edge"},"3x3 General Edge Detection"),r.a.createElement("option",{value:"5x5 blur"},"5x5 blur"),r.a.createElement("option",{value:"5x5 gauss blur"},"5x5 Gaussian blur"))))};c.a.render(r.a.createElement(v,null),document.getElementById("root"))}],[[5,1,2]]]);
//# sourceMappingURL=main.4e8ccaf3.chunk.js.map